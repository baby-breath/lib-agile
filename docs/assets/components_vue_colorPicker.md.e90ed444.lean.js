var j=Object.defineProperty;var I=(o,t,e)=>t in o?j(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var d=(o,t,e)=>(I(o,typeof t!="symbol"?t+"":t,e),e);import{i as $}from"./chunks/type.b0e6b72f.js";import{d as R,g as _,o as b,c as D,r as G,n as B,l as x,O as A,a0 as O,h as E,v as H,j as Q,a1 as Y,k as r,J as C,a2 as J,w as f,F as U,G as X,R as T}from"./chunks/framework.7c2c4810.js";import{_ as L}from"./chunks/index.vue_vue_type_style_index_0_lang.e4ca926a.js";const K={name:"LAvGrid"},W=R({...K,props:{num:{type:Number},gutter:{type:[Number,Array]},align:{type:String}},setup(o){const t=o,e=_(()=>t.align&&{start:"align-start",center:"align-center",end:"align-end"}[t.align]||""),s=_(()=>{const n={};return t.num&&(n["grid-template-columns"]=`repeat(${t.num}, 1fr)`),t.gutter&&$(t.gutter)&&(n["grid-gap"]=t.gutter+"px"),n});return(n,l)=>(b(),D("div",{class:B(["lib-av-grid",[x(e)]]),style:A(x(s))},[G(n.$slots,"default")],6))}});const Z={theme:{type:String,default:"light"},color:{type:String,default:"#000000"},quickColorsDefault:{type:Array,default:()=>["#000000","#FFFFFF","#FF1900","#F47365","#FFB243","#FFE623","#6EFF2A","#1BC7B1","#00BEFF","#2E81FF","#5D61FF","#FF89CF","#FC3CAD","#BF3DCE","#8E00A7","rgba(0,0,0,0)"]}},q=(o,t,e,s,n,l)=>{const a=o==="l",i=t.createLinearGradient(0,0,a?e:0,a?0:s);i.addColorStop(.01,n),i.addColorStop(.99,l),t.fillStyle=i,t.fillRect(0,0,e,s)};function z({r:o,g:t,b:e},s){const n=a=>("0"+Number(a).toString(16)).slice(-2),l=`#${n(o)}${n(t)}${n(e)}`;return s?l.toUpperCase():l}function tt(o){o=o.slice(1);const t=e=>parseInt(e,16)||0;return{r:t(o.slice(0,2)),g:t(o.slice(2,4)),b:t(o.slice(4,6))}}function P(o){return typeof o=="string"?(o=(/rgba?\((.*?)\)/.exec(o)||["","0,0,0,1"])[1].split(","),{r:Number(o[0])||0,g:Number(o[1])||0,b:Number(o[2])||0,a:Number(o[3]?o[3]:1)}):o}function et({r:o,g:t,b:e}){o=o/255,t=t/255,e=e/255;const s=Math.max(o,t,e),n=Math.min(o,t,e),l=s-n;let a=0;s===n?a=0:s===o?t>=e?a=60*(t-e)/l:a=60*(t-e)/l+360:s===t?a=60*(e-o)/l+120:s===e&&(a=60*(o-t)/l+240),a=Math.floor(a);const i=parseFloat((s===0?0:1-n/s).toFixed(2)),h=parseFloat(s.toFixed(2));return{h:a,s:i,v:h}}function st(o){let t={r:0,g:0,b:0,a:1};/#/.test(o)?t=tt(o):/rgb/.test(o)?t=P(o):typeof o=="string"?t=P(`rgba(${o})`):Object.prototype.toString.call(o)==="[object Object]"&&(t=o);const{r:e,g:s,b:n,a:l}=t,{h:a,s:i,v:h}=et(t);return{r:e,g:s,b:n,a:l===void 0?1:l,h:a,s:i,v:h}}function ot(o){const t=document.createElement("canvas"),e=t.getContext("2d"),s=o*2;return t.width=s,t.height=s,e.fillStyle="#ffffff",e.fillRect(0,0,s,s),e.fillStyle="#ccd5db",e.fillRect(0,0,o,o),e.fillRect(o,o,o,o),t}class nt{constructor(t){d(this,"el");d(this,"ctx");d(this,"width",152);d(this,"height",152);d(this,"onChange");const e=t.querySelector("canvas");this.ctx=e==null?void 0:e.getContext("2d"),this.el=t,this.el.addEventListener("mousedown",s=>{this.onMouseDown(s)})}load(t,e){this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height),q("l",this.ctx,this.width,this.height,"#FFFFFF","rgba(255,255,255,0)"),q("p",this.ctx,this.width,this.height,"rgba(0,0,0,0)","#000000"),this.renderSlide(e.s*this.width-5,(1-e.v)*this.height-5)}unload(){this.el.removeEventListener("mousedown",this.onMouseDown)}renderSlide(t,e){const s=this.el.querySelector(".slide");s.style.left=t+"px",s.style.top=e+"px"}onMouseDown(t){const{top:e,left:s}=this.el.getBoundingClientRect(),n=a=>{let i=a.clientX-s,h=a.clientY-e;i<0&&(i=0),h<0&&(h=0),i>this.width&&(i=this.width),h>this.height&&(h=this.height),this.renderSlide(i-5,h-5);const F=this.ctx.getImageData(Math.min(i,this.width-1),Math.min(h,this.height-1),1,1),[y,S,u]=F.data;this.onChange&&this.onChange({r:y,g:S,b:u})};n(t);const l=()=>{document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",l)}}class at{constructor(t){d(this,"el");d(this,"ctx");d(this,"width",16);d(this,"height",152);d(this,"onChange");const e=t.querySelector("canvas");this.ctx=e==null?void 0:e.getContext("2d"),this.el=t,this.el.addEventListener("mousedown",s=>{this.onMouseDown(s)})}load(t){const e=this.ctx.createLinearGradient(0,0,0,this.height);e.addColorStop(0,"#FF0000"),e.addColorStop(.17*1,"#FF00FF"),e.addColorStop(.17*2,"#0000FF"),e.addColorStop(.17*3,"#00FFFF"),e.addColorStop(.17*4,"#00FF00"),e.addColorStop(.17*5,"#FFFF00"),e.addColorStop(1,"#FF0000"),this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.width,this.height),this.renderSlide((1-t.h/360)*this.height-2)}unload(){this.el.removeEventListener("mousedown",this.onMouseDown)}renderSlide(t){const e=this.el.querySelector(".slide");e.style.top=t+"px"}onMouseDown(t){const{top:e}=this.el.getBoundingClientRect(),s=l=>{let a=l.clientY-e;a<0&&(a=0),a>this.height&&(a=this.height),this.renderSlide(a-2);const i=this.ctx.getImageData(0,Math.min(a,this.height-1),1,1),[h,F,y]=i.data;this.onChange&&this.onChange({r:h,g:F,b:y})};s(t);const n=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",n)}}class lt{constructor(t){d(this,"el");d(this,"ctx");d(this,"width",16);d(this,"height",152);d(this,"onChange");const e=t.querySelector("canvas");this.ctx=e==null?void 0:e.getContext("2d"),this.el=t,this.el.addEventListener("mousedown",s=>{this.onMouseDown(s)})}load(t,e){const s=ot(5);this.ctx.fillStyle=this.ctx.createPattern(s,"repeat"),this.ctx.fillRect(0,0,this.width,this.height),q("p",this.ctx,this.width,this.height,"rgba(255,255,255,0)",t),this.renderSlide(e*this.height-2)}unload(){this.el.removeEventListener("mousedown",this.onMouseDown)}renderSlide(t){const e=this.el.querySelector(".slide");e.style.top=t+"px"}onMouseDown(t){const{top:e}=this.el.getBoundingClientRect(),s=l=>{let a=l.clientY-e;a<0&&(a=0),a>this.height&&(a=this.height);const i=parseFloat((a/this.height).toFixed(2));this.renderSlide(i*this.height-2),this.onChange&&this.onChange(i)};s(t);const n=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",n)}}const it={class:"color-set-area"},rt=r("canvas",{width:"152",height:"152"},null,-1),ct=r("div",{class:"slide"},null,-1),dt=[rt,ct],ht=r("canvas",{width:"16",height:"152"},null,-1),ut=r("div",{class:"slide"},null,-1),pt=[ht,ut],gt=r("canvas",{width:"16",height:"152"},null,-1),mt=r("div",{class:"slide"},null,-1),vt=[gt,mt],ft={class:"show-box transparent-bg"},_t=r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-12 -12 48 48"},[r("path",{d:"M13.1,8.2l5.6,5.6c0.4,0.4,0.5,1.1,0.1,1.5s-1.1,0.5-1.5,0.1c0,0-0.1,0-0.1-0.1l-1.4-1.4l-7.7,7.7C7.9,21.9,7.6,22,7.3,22H3.1C2.5,22,2,21.5,2,20.9l0,0v-4.2c0-0.3,0.1-0.6,0.3-0.8l5.8-5.8C8.5,9.7,9.2,9.6,9.7,10s0.5,1.1,0.1,1.5c0,0,0,0.1-0.1,0.1l-5.5,5.5v2.7h2.7l7.4-7.4L8.7,6.8c-0.5-0.4-0.5-1-0.1-1.5s1.1-0.5,1.5-0.1c0,0,0.1,0,0.1,0.1l1.4,1.4l3.5-3.5c1.6-1.6,4.1-1.6,5.8-0.1c1.6,1.6,1.6,4.1,0.1,5.8L20.9,9l-3.6,3.6c-0.4,0.4-1.1,0.5-1.5,0.1"})],-1),Ft=[_t],yt=r("div",{class:"name"},"HEX",-1),Ct=["value"],bt=r("div",{class:"name"},"rgba",-1),Dt=["value"],xt=["onClick"],St={name:"LColorPicker"},wt=R({...St,props:Z,emits:["change","selectQuickColor"],setup(o,{emit:t}){const e=o,s=O({isPickColor:!!window.EyeDropper,colorMeta:{r:0,g:0,b:0,a:1,h:0,s:0,v:0}}),n=_(()=>({h:s.colorMeta.h,s:s.colorMeta.s,v:s.colorMeta.v})),l=_(()=>`rgb(${s.colorMeta.r}, ${s.colorMeta.g}, ${s.colorMeta.b})`),a=_(()=>`${s.colorMeta.r}, ${s.colorMeta.g}, ${s.colorMeta.b}, ${s.colorMeta.a}`),i=_(()=>`rgba(${a.value})`),h=_(()=>z({r:s.colorMeta.r,g:s.colorMeta.g,b:s.colorMeta.b},!0)),F=E(null),y=E(null),S=E(null);let u=null,g=null,m=null;const v=(c,p)=>{if($(c))s.colorMeta.a=c;else{const M=st(c);Object.assign(s.colorMeta,M)}u&&!p&&u.load(l.value,n.value),g&&!p&&g.load(n.value),m&&!p&&m.load(l.value,s.colorMeta.a)};v(e.color);const N=()=>{new EyeDropper().open().then(p=>{v(p.sRGBHex)}).catch(p=>{console.log(p)})};H(()=>e.color,(c,p)=>{w.hex!==c&&w.rgba!==c&&v(e.color)});let w={};const k=()=>{w={rgba:i.value,hsv:n.value,hex:h.value},t("change",w)},V=c=>{v(c),k(),t("selectQuickColor",c)};return Q(()=>{u=new nt(F.value),u.load(l.value,n.value),u.onChange=c=>{v(c,!0),k()},g=new at(y.value),g.load(n.value),g.onChange=c=>{v(c),k()},m=new lt(S.value),m.load(l.value,s.colorMeta.a),m.onChange=c=>{v(c,!0),k()}}),Y(()=>{u&&(u.unload(),u=null),g&&(g.unload(),g=null),m&&(m.unload(),m=null)}),(c,p)=>(b(),D("div",{class:B(["lib-color-picker",[e.theme]])},[r("div",it,[r("div",{ref_key:"saturationRef",ref:F,class:"saturation"},dt,512),r("div",{ref_key:"hueRef",ref:y,class:"hue"},pt,512),r("div",{ref_key:"alphaRef",ref:S,class:"color-alpha"},vt,512)]),C(L,{class:"color-display"},J({default:f(()=>[r("div",ft,[r("div",{style:A({"background-color":x(i)})},null,4)])]),_:2},[s.isPickColor?{name:"end",fn:f(()=>[r("div",{class:"sucker",onClick:N},Ft)]),key:"0"}:void 0]),1024),C(L,{class:"color-value"},{start:f(()=>[yt]),default:f(()=>[r("input",{value:x(h)},null,8,Ct)]),_:1}),C(L,{class:"color-value"},{start:f(()=>[bt]),default:f(()=>[r("input",{value:x(i)},null,8,Dt)]),_:1}),C(W,{class:"color-quick-selection",num:8,gutter:10},{default:f(()=>[(b(!0),D(U,null,X(e.quickColorsDefault,M=>(b(),D("div",{class:"quick-item transparent-bg",onClick:Lt=>V(M)},[r("div",{style:A({"background-color":M})},null,4)],8,xt))),256))]),_:1})],2))}});const kt=T("",5),Mt=T("",6),Rt=JSON.parse('{"title":"颜色选择器","description":"","frontmatter":{},"headers":[],"relativePath":"components/vue/colorPicker.md","filePath":"components/vue/colorPicker.md"}'),Et={name:"components/vue/colorPicker.md"},Bt=Object.assign(Et,{setup(o){return(t,e)=>(b(),D("div",null,[kt,C(wt),Mt]))}});export{Rt as __pageData,Bt as default};
