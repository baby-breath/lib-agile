import{d as U,a0 as M,h as C,v as y,j as O,a1 as j,o as h,c as u,k as e,r as J,n as F,O as H,e as W,Q as $,J as A,w as _,a as v,R as b}from"./chunks/framework.b4504927.js";const Q={type:{type:String,default:"hover"},minBarSize:{type:Number,default:50},scrollTop:{type:Number,default:0},scrollLeft:{type:Number,default:0},offsetLeft:{type:Number,default:0},offsetRight:{type:Number,default:10},offsetTop:{type:Number,default:0},offsetBottom:{type:Number,default:10},isAutoUpdate:{type:Boolean,default:!0},dragSpeedX:{type:Number,default:1},dragSpeedY:{type:Number,default:1}},B=U({__name:"index",props:Q,emits:["scroll"],setup(x,{expose:T,emit:q}){const t=x,s=M({scrollWidth:0,scrollHeight:0,scrollContentWidth:0,scrollContentHeight:0,scrollBarY:{height:0,top:t.offsetTop,clientY:null,multiple:1,scrollTop:0},scrollBarX:{width:0,left:t.offsetLeft,clientX:null,multiple:1,scrollLeft:0}});let f=!1,E=null,S=null,w=null;const g=C(),a=C(),c=C(),k=()=>{s.scrollWidth=a.value.offsetWidth,s.scrollHeight=a.value.offsetHeight,s.scrollContentWidth=c.value.offsetWidth,s.scrollContentHeight=c.value.offsetHeight},r=()=>{if(s.scrollContentWidth>s.scrollWidth){const l=s.scrollWidth-(s.scrollContentWidth-s.scrollWidth)-t.offsetLeft-t.offsetRight;s.scrollBarX.width=l<t.minBarSize?t.minBarSize:l,s.scrollBarX.multiple=(s.scrollContentWidth-s.scrollWidth)/(s.scrollWidth-s.scrollBarX.width-t.offsetLeft-t.offsetRight)}if(s.scrollContentHeight>s.scrollHeight){const l=s.scrollHeight-(s.scrollContentHeight-s.scrollHeight)-t.offsetTop-t.offsetBottom;s.scrollBarY.height=l<t.minBarSize?t.minBarSize:l,s.scrollBarY.multiple=(s.scrollContentHeight-s.scrollHeight)/(s.scrollHeight-s.scrollBarY.height-t.offsetTop-t.offsetBottom)}};function i(l=!0){const o=a.value.scrollLeft,n=t.offsetLeft+o/s.scrollBarX.multiple,p=g.value.querySelector(".agile-scroll-bar-x");p&&(p.style.left=n+"px"),l&&(S=requestAnimationFrame(()=>{i()}))}function d(l=!0){const o=a.value.scrollTop,n=t.offsetTop+o/s.scrollBarY.multiple,p=g.value.querySelector(".agile-scroll-bar-y");p&&(p.style.top=n+"px"),l&&(w=requestAnimationFrame(()=>{d()}))}const m=()=>{k(),r(),$(()=>{i(!1),d(!1)})},N=l=>{f||(i(),d(),f=!0),clearTimeout(E),E=setTimeout(()=>{cancelAnimationFrame(S),cancelAnimationFrame(w),f=!1},500),q("scroll",{scrollTop:a.value.scrollTop,scrollLeft:a.value.scrollLeft,scrollWidth:s.scrollWidth,scrollHeight:s.scrollHeight,scrollContentWidth:s.scrollContentWidth,scrollContentHeight:s.scrollContentHeight},l)},L=(l,o)=>{o==="scrollBarX"&&(s.scrollBarX.clientX=l.clientX,s.scrollBarX.scrollLeft=a.value.scrollLeft),o==="scrollBarY"&&(s.scrollBarY.clientY=l.clientY,s.scrollBarY.scrollTop=a.value.scrollTop),window.addEventListener("mousemove",X)};function X(l){const o=s.scrollBarX.clientX,n=s.scrollBarY.clientY;if(o){let p=l.clientX-o;a.value.scrollLeft=s.scrollBarX.scrollLeft+p*(s.scrollBarX.multiple*t.dragSpeedX)}if(n){let p=l.clientY-n;a.value.scrollTop=s.scrollBarY.scrollTop+p*s.scrollBarY.multiple*t.dragSpeedY}}function P(){s.scrollBarX.clientX=null,s.scrollBarY.clientY=null,window.removeEventListener("mousemove",X)}function Y(){window.addEventListener("mouseup",P)}function R(){window.removeEventListener("mouseup",Y)}function V(l){l>=0&&(a.value.scrollLeft=l)}function z(l){l>=0&&(a.value.scrollTop=l)}let D=null;const I=()=>{let l=null;D=new MutationObserver(()=>{clearTimeout(l),l=setTimeout(()=>{m()},200)}),D.observe(c.value,{attributes:!0,childList:!0,subtree:!0})};return y(()=>t.offsetLeft,()=>{r(),i(!1)}),y(()=>t.offsetRight,()=>{r()}),y(()=>t.offsetTop,()=>{r(),d(!1)}),y(()=>t.offsetBottom,()=>{r()}),O(()=>{m(),Y(),t.isAutoUpdate&&I()}),j(()=>{R(),t.isAutoUpdate&&D&&D.disconnect()}),T({updated:m,setScrollLeft:V,setScrollTop:z}),(l,o)=>(h(),u("div",{class:F(["agile-scrollbar",{"not-user-select":s.scrollBarX.clientX||s.scrollBarY.clientY,"scrollbar-hover":t.type==="hover","scrollbar-hide":t.type==="hide"}]),ref_key:"scrollBox",ref:g},[e("div",{class:F(["agile-scroll",{"scroll-x":s.scrollContentWidth>s.scrollWidth,"scroll-y":s.scrollContentHeight>s.scrollHeight}]),ref_key:"scroll",ref:a,onScroll:N},[e("div",{class:"agile-scroll-wrapper",ref_key:"scrollContent",ref:c},[J(l.$slots,"default")],512)],34),s.scrollContentWidth>s.scrollWidth?(h(),u("div",{key:0,class:F(["agile-scroll-bar-x",{act:s.scrollBarX.clientX}]),style:H({width:s.scrollBarX.width+"px"}),onMousedown:o[0]||(o[0]=n=>L(n,"scrollBarX"))},null,38)):W("",!0),s.scrollContentHeight>s.scrollHeight?(h(),u("div",{key:1,class:F(["agile-scroll-bar-y",{act:s.scrollBarY.clientY}]),style:H({height:s.scrollBarY.height+"px"}),onMousedown:o[1]||(o[1]=n=>L(n,"scrollBarY"))},null,38)):W("",!0)],2))}});const G=e("h1",{id:"滚动容器",tabindex:"-1"},[v("滚动容器 "),e("a",{class:"header-anchor",href:"#滚动容器","aria-label":'Permalink to "滚动容器"'},"​")],-1),K=e("p",null,"自定义滚动条样式的滚动容器，基于浏览器原生滚动实现，既保留了原生滚动的性能，又具备自定义样式能力，使用起来更是比写 div 还方便。",-1),Z=e("h2",{id:"基本使用",tabindex:"-1"},[v("基本使用 "),e("a",{class:"header-anchor",href:"#基本使用","aria-label":'Permalink to "基本使用"'},"​")],-1),ss=e("p",null,"当内容超过容器宽高时会自动出现对应滚动条",-1),ls=e("div",{style:{width:"1500px",height:"400px",padding:"10px"}},"占位内容",-1),ts=b("",3),os=e("div",{style:{width:"1500px",padding:"10px"}},"占位内容",-1),as=b("",2),es=e("div",{style:{width:"1500px",height:"400px",padding:"10px"}},[v(" 占位内容 "),e("div",{style:{"text-align":"right"}},"占位内容")],-1),ns=b("",8),cs=JSON.parse('{"title":"滚动容器","description":"","frontmatter":{},"headers":[],"relativePath":"components/scrollBar.md","filePath":"components/scrollBar.md"}'),ps={name:"components/scrollBar.md"},is=Object.assign(ps,{setup(x){return(T,q)=>(h(),u("div",null,[G,K,Z,ss,A(B,{style:{border:"solid #eee 1px",height:"300px"}},{default:_(()=>[ls]),_:1}),ts,A(B,{type:"show",style:{border:"solid #eee 1px",height:"200px"}},{default:_(()=>[os]),_:1}),as,A(B,{type:"show",offsetLeft:50,offsetRight:50,offsetTop:50,offsetBottom:50,style:{border:"solid #eee 1px",height:"300px"}},{default:_(()=>[es]),_:1}),ns]))}});export{cs as __pageData,is as default};
